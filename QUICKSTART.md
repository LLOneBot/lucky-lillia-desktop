# 快速开始指南

本指南帮助你快速上手 QQ机器人管理器。

## 安装和运行

### 方式1: 使用可执行文件（推荐给普通用户）

1. 下载最新版本的 `QQ机器人管理器.exe`
2. 双击运行即可

### 方式2: 从源码运行（推荐给开发者）

#### 前置要求

- Python 3.8 或更高版本
- uv 包管理器（推荐）或 pip

#### 安装步骤

```bash
# 1. 克隆或下载项目
git clone <repository-url>
cd LuckyLilliaDesktop

# 2. 创建虚拟环境（使用 uv）
uv venv

# 3. 安装依赖
uv pip install -r requirements.txt

# 4. 运行应用
uv run python main.py
```

## 首次使用

### 1. 配置QQ路径

首次运行时，需要配置QQ的安装路径：

1. 点击左侧导航栏的 **配置** 图标
2. 在 "QQ路径" 字段中输入或选择QQ的安装路径
   - 例如: `C:\Program Files\Tencent\QQ\QQ.exe`
3. 点击 **保存配置**

### 2. 自动下载依赖组件

应用会自动检测并下载缺失的组件：

**PMHQ下载**：
- 首次启动时，如果PMHQ不存在，点击"启动所有服务"会自动弹出下载对话框
- 下载完成后会自动解压到 `bin/pmhq/` 目录
- 支持断点续传和镜像加速

**LLOneBot下载**：
- PMHQ下载完成后，会自动检测LLOneBot
- 如果LLOneBot不存在，会弹出下载对话框
- 下载完成后会自动解压到 `bin/llonebot/` 目录
- 所有组件下载完成后会自动启动服务

### 3. 配置LLOneBot

1. 确保已安装 Node.js
2. 在配置页面设置：
   - **LLOneBot路径**: llonebot.js 文件的路径
   - **Node路径**: node.exe 的路径（通常在系统PATH中）
3. 保存配置

### 4. 启动服务

返回首页，点击相应的启动按钮：

- **启动PMHQ**: 启动PMHQ进程
- **启动LLOneBot**: 启动LLOneBot进程

## 主要功能

### 首页

- **进程状态监控**: 实时显示各进程的运行状态
- **资源使用**: 显示CPU和内存使用情况
- **快速控制**: 一键启动/停止进程
- **日志预览**: 查看最近的日志输出

### 日志页面

- **实时日志**: 查看所有进程的实时日志输出
- **过滤功能**: 按进程名过滤日志
- **清空日志**: 清空当前显示的日志
- **颜色区分**: stdout（蓝色）和 stderr（红色）

### 配置页面

- **路径配置**: 设置各组件的路径
- **自动启动**: 配置应用启动时自动启动的进程
- **日志级别**: 设置日志详细程度
- **端口配置**: 设置服务端口

### 关于页面

- **版本信息**: 查看各组件的版本
- **更新检查**: 检查是否有新版本可用
- **项目信息**: 查看项目相关信息

## 常见问题

### Q: 启动进程失败怎么办？

A: 检查以下几点：
1. 确认配置的路径是否正确
2. 确认相关文件是否存在
3. 查看日志页面的错误信息
4. 确认是否有足够的权限

### Q: 看不到日志输出？

A: 可能的原因：
1. 进程还未启动
2. 进程没有输出任何内容
3. 切换到日志页面查看完整日志

### Q: 如何切换主题？

A: 点击右上角的主题切换按钮（太阳/月亮图标）

### Q: 配置文件在哪里？

A: 配置文件位于应用根目录的 `config.json`

### Q: 如何重置配置？

A: 在配置页面点击 **重置为默认** 按钮

## 高级功能

### 自动启动

在配置页面启用 "自动启动" 选项，应用启动时会自动启动相应的进程。

### 资源监控

首页会实时显示：
- 管理器自身的资源使用
- PMHQ的资源使用
- LLOneBot的资源使用
- QQ进程的资源使用

### 日志管理

- 日志自动保存到 `logs/` 目录
- 支持按日期分割日志文件
- 内存中保留最近1000条日志

## 开发和调试

### 运行测试

```bash
# 运行所有测试
uv run pytest tests/ -v

# 运行特定测试文件
uv run pytest tests/test_home_page.py -v
```

### 查看日志文件

日志文件位于 `logs/` 目录，按日期命名：
- `logs/app_20251125.log`

### 调试模式

修改 `main.py` 中的日志级别为 DEBUG：

```python
logging.basicConfig(
    level=logging.DEBUG,  # 改为 DEBUG
    ...
)
```

## 获取帮助

- 查看完整文档: [README.md](README.md)
- 打包说明: [BUILD.md](BUILD.md)
- 发布说明: [RELEASE.md](RELEASE.md)
- 提交问题: GitHub Issues

---

祝使用愉快！ 🎉
