# 打包说明

本文档说明如何将QQ机器人管理器打包为独立的可执行文件。

## 前置要求

1. Python 3.8 或更高版本
2. 已安装所有依赖：`pip install -r requirements.txt`
3. PyInstaller：`pip install pyinstaller`

## 准备图标（可选）

如果你想自定义应用图标：

1. 准备一个 `.ico` 格式的图标文件
2. 将其命名为 `icon.ico` 并放在项目根目录
3. 如果没有图标文件，打包时会使用默认图标

你可以使用在线工具将 PNG/JPG 转换为 ICO 格式：
- https://www.icoconverter.com/
- https://convertio.co/zh/png-ico/

推荐图标尺寸：256x256 像素

## 打包方法

### 方法1：使用批处理脚本（推荐）

直接双击运行 `build.bat` 文件，脚本会自动：
1. 检查并安装 PyInstaller（如果需要）
2. 清理旧的构建文件
3. 执行打包
4. 显示打包结果

### 方法2：手动打包

在项目根目录打开命令行，执行：

```bash
pyinstaller qq-bot-manager.spec
```

## 打包输出

打包完成后，可执行文件位于：
```
dist/QQ机器人管理器.exe
```

这是一个单文件可执行程序，可以直接分发给用户使用。

## 打包配置说明

打包配置文件 `qq-bot-manager.spec` 包含以下设置：

- **单文件模式**：所有依赖打包到一个 .exe 文件中
- **无控制台窗口**：应用启动时不显示命令行窗口
- **UPX压缩**：启用 UPX 压缩以减小文件大小
- **排除测试库**：不打包 pytest、hypothesis 等测试相关库

## 测试打包后的应用

1. 找到 `dist/QQ机器人管理器.exe`
2. 双击运行
3. 测试所有功能是否正常：
   - 启动/停止进程
   - 查看日志
   - 修改配置
   - 检查更新
   - 主题切换

## 常见问题

### 打包后文件太大

- 检查是否排除了不必要的依赖
- 确保 UPX 压缩已启用
- 考虑使用文件夹模式而非单文件模式

### 打包后无法运行

- 检查是否有杀毒软件误报
- 尝试在命令行中运行查看错误信息
- 检查 spec 文件中的 hiddenimports 是否完整

### 缺少图标

- 如果没有 `icon.ico` 文件，可以注释掉 spec 文件中的 `icon='icon.ico'` 行
- 或者创建一个图标文件

## 分发说明

打包后的可执行文件可以直接分发给用户，无需安装 Python 环境。

建议同时提供：
1. 可执行文件：`QQ机器人管理器.exe`
2. 使用说明：`README.md`
3. 配置示例：`config.example.json`

用户首次运行时，应用会自动创建默认配置文件。
